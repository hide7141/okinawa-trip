<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FamilyVoyage æ²–ç¹©3å¤©2å¤œ | 5äººå®¶æ—è¡Œ</title>

  <!-- èˆŠç‰ˆ UI åŸºåº• -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background-color: #fdfbf7; color: #4a4a4a; }
    .card-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.06); }

    /* Top nav tabs */
    .tab-active { border-bottom: 3px solid #d4a373; color: #d4a373; font-weight: 700; }
    .tab-inactive { border-bottom: 3px solid transparent; color: #6b7280; }

    /* Horizontal pill tabs */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Ship pills */
    .pill { transition: all .15s ease; }
    .pill-active { background: #d4a373; color: #fff; box-shadow: 0 6px 16px rgba(212,163,115,.25); }
    .pill-inactive { background: #e5e7eb; color: #374151; }
    .pill-inactive:hover { background: #d1d5db; }

    /* Port step list */
    .step-item { transition: all .15s ease; }
    .step-active { border-color: #d4a373; background: #fff7ed; }
    .step-active .step-index { background: #d4a373; color: #fff; }
    .step-inactive { border-color: #e5e7eb; background: #fff; }
    .step-inactive:hover { background: #f9fafb; }
    .step-index {
      width: 28px; height: 28px; border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      font-weight:700; font-size: 12px;
      background:#f3f4f6; color:#6b7280;
      flex: 0 0 auto;
    }

    table { border-collapse: collapse; }
  </style>
</head>

<body class="min-h-screen flex flex-col">

  <!-- Navigation -->
  <nav class="sticky top-0 z-50 bg-white shadow-sm border-b border-[#e5e5e5]">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex justify-between items-center h-16">
        <div class="font-bold text-xl text-[#d4a373] tracking-wide">
          FamilyVoyage
          <span class="text-xs text-gray-400 block sm:inline font-normal">æ²–ç¹©3å¤©2å¤œ | 5äººå®¶æ—è¡Œ</span>
        </div>

        <!-- Desktop Tabs -->
        <div class="hidden md:flex space-x-8">
          <button type="button" onclick="switchTab('dashboard')" id="nav-dashboard" class="tab-active py-5 px-2 transition-colors duration-200">ç¸½è¦½ & æ¸…å–®</button>
          <button type="button" onclick="switchTab('port')" id="nav-port" class="tab-inactive py-5 px-2 transition-colors duration-200">åŸºéš†æ¸¯æµç¨‹</button>
          <button type="button" onclick="switchTab('ship')" id="nav-ship" class="tab-inactive py-5 px-2 transition-colors duration-200">éƒµè¼ªè¨­æ–½</button>
          <button type="button" onclick="switchTab('charter')" id="nav-charter" class="tab-inactive py-5 px-2 transition-colors duration-200">æ²–ç¹©åŒ…è»Šè³‡è¨Š</button>
          <button type="button" onclick="switchTab('spots')" id="nav-spots" class="tab-inactive py-5 px-2 transition-colors duration-200">è¡Œç¨‹æ™¯é»</button>
        </div>

        <!-- Mobile Menu Button -->
        <button type="button" onclick="toggleMobileMenu()" class="md:hidden text-gray-500 focus:outline-none" aria-label="é–‹å•Ÿé¸å–®">
          <span class="text-2xl">â˜°</span>
        </button>
      </div>

      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden md:hidden pb-4">
        <button type="button" onclick="switchTab('dashboard')" class="block w-full text-left py-2 px-4 hover:bg-gray-50">ç¸½è¦½ & æ¸…å–®</button>
        <button type="button" onclick="switchTab('port')" class="block w-full text-left py-2 px-4 hover:bg-gray-50">åŸºéš†æ¸¯æµç¨‹</button>
        <button type="button" onclick="switchTab('ship')" class="block w-full text-left py-2 px-4 hover:bg-gray-50">éƒµè¼ªè¨­æ–½</button>
        <button type="button" onclick="switchTab('charter')" class="block w-full text-left py-2 px-4 hover:bg-gray-50">æ²–ç¹©åŒ…è»Šè³‡è¨Š</button>
        <button type="button" onclick="switchTab('spots')" class="block w-full text-left py-2 px-4 hover:bg-gray-50">è¡Œç¨‹æ™¯é»</button>
      </div>
    </div>
  </nav>

  <main class="flex-grow max-w-6xl mx-auto px-4 py-6 space-y-6">

    <!-- 1: DASHBOARD -->
    <section id="view-dashboard" class="space-y-8">
      <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-[#d4a373]">
        <h2 class="text-2xl font-bold text-gray-800">æ­¡è¿ä¾†åˆ°éº—æ˜Ÿéƒµè¼ª-æ²–ç¹©æ—…éŠç­†è¨˜</h2>
        <p class="mt-2 text-gray-600">é‡å° 2 ä½é•·è€…ã€2 ä½å¤§äººã€1 ä½å…’ç«¥ï¼ˆ5 æ­²ï¼‰çš„å°ˆå±¬è¨ˆç•«ã€‚æ­¤é æ•´åˆæ‰€æœ‰é‡è¦è³‡è¨Šï¼Œæ–¹ä¾¿éš¨æ™‚å›ä¾†æŸ¥çœ‹ã€‚</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Checklist -->
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class="mr-2">ğŸ“‹</span> å‡ºç™¼å‰å¿…å‚™æ¸…å–®</h2>
          <div class="space-y-3" id="checklist-container"></div>
          <p class="mt-4 text-xs text-gray-500">âœ” å‹¾é¸ç‹€æ…‹æœƒè‡ªå‹•å„²å­˜ï¼ˆé‡æ–°æ•´ç†ä¸æœƒæ¶ˆå¤±ï¼‰</p>
        </div>

        <!-- Itinerary Overview -->
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><span class="mr-2">ğŸ—“ï¸</span> è¡Œç¨‹æ¦‚è¦½</h2>
          <ul class="list-disc pl-5 space-y-2 text-gray-700 text-sm">
            <li><strong>Day 1ï¼š</strong>åŸºéš†æ¸¯ç™»èˆ¹ï¼ˆå•Ÿèˆª 15:00ï¼›å ±åˆ° 11:00~13:00ï¼‰</li>
            <li><strong>Day 2ï¼š</strong>æ²–ç¹©é‚£éœ¸ï¼ˆæŠµé” TW 10:00 / JP 11:00ï¼›å•Ÿèˆª TW 20:00 / JP 21:00ï¼‰</li>
            <li><strong>Day 3ï¼š</strong>è¿”æŠµåŸºéš†ï¼ˆæŠµé” 15:00ï¼‰</li>
          </ul>
          <div class="mt-4 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
            <p class="text-sm text-gray-700"><strong>æ³¨æ„ï¼š</strong>Day 2 å²¸ä¸Šç´„ 8~10 å°æ™‚ï¼Œéœ€åš´æ ¼æ§ç®¡åŒ…è»Šæ™‚é–“ï¼Œå»ºè­°ä¿ç•™å›æ¸¯å£ç·©è¡ã€‚</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 2: PORT (åœ–1ï¼šå·¦é¸å–® + å³å…§å®¹) -->
    <section id="view-port" class="hidden space-y-8">
      <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-[#d4a373]">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center">
          <span class="mr-2">âš“</span> åŸºéš†æ¸¯ç™»èˆ¹æ”»ç•¥
        </h2>
        <p class="mt-2 text-gray-600">ç›®çš„ï¼šé‡å°é•·è¼©èˆ‡å°å­©æœ€ä½³åŒ–ç™»èˆ¹æµç¨‹ã€‚</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Left selectable list -->
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h3 class="text-lg font-bold text-gray-800 mb-4">ç™»èˆ¹æµç¨‹æ‘˜è¦ï¼ˆå››æ®µï¼‰</h3>
          <div id="port-step-list" class="space-y-3"></div>
          <p class="mt-4 text-xs text-gray-500">æç¤ºï¼šé»å·¦å´é …ç›®ï¼Œå³å´æœƒé¡¯ç¤ºè©²é …å®Œæ•´å…§å®¹ã€‚</p>
        </div>

        <!-- Right detail panel -->
        <div class="bg-white p-6 rounded-xl card-shadow">
          <div id="port-step-detail"></div>
        </div>
      </div>

      <!-- Traffic cards -->
      <div class="bg-white p-6 rounded-xl card-shadow">
        <h3 class="text-xl font-bold text-gray-800 mb-3">äº¤é€šèˆ‡æ¥é€è¡Œç¨‹</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
            <h4 class="font-bold text-gray-800 mb-2">åŒ…è»Šæ¥é€ï¼ˆæ­èˆ¹ï¼‰</h4>
            <ul class="list-disc pl-5 space-y-2 text-sm text-gray-700">
              <li><strong>äº¤é€šï¼š</strong>é«˜éµå—æ¸¯ç«™ï¼ŒåŒ…è»Šï¼ˆtripool-æ—…æ­¥ï¼‰æ¥é€ç›´é”è¥¿å²¸ç¢¼é ­</li>
              <li><strong>æ™‚é–“ï¼š</strong>2 æœˆ 25 æ—¥ 10:30</li>
              <li><strong>è¯çµ¡è³‡è¨Šï¼š</strong><span class="text-gray-400">ï¼ˆå¾…è£œï¼‰</span></li>
            </ul>
          </div>

          <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
            <h4 class="font-bold text-gray-800 mb-2">é è¨ˆï¼šç«è»Šï¼ˆä¸‹èˆ¹ï¼‰</h4>
            <p class="text-sm text-gray-700">åŸºéš†è»Šç«™åŒ—ç«™å‡ºå£æ­¥è¡Œ 5 åˆ†é˜ï¼Œæ­ä¹˜ç«è»Šè‡³é«˜éµå—æ¸¯ç«™ã€‚</p>
            <div class="mt-3 text-xs text-gray-500">
              ï¼ˆå¯é¸è£œå……ï¼‰é›†åˆé»ã€å‚™æ´é»ã€é›¨å‚™ã€é•·è¼©æ­¥è¡Œæ³¨æ„äº‹é …â€¦
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 3: SHIP (åœ–2ï¼štabs é«˜äº® + WiFi è¡¨æ ¼è‡ªå‹•å»¶å±•) -->
    <section id="view-ship" class="hidden space-y-8">
      <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-[#d4a373]">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center">
          <span class="mr-2">ğŸš¢</span> æ¢ç´¢æ˜Ÿè™Ÿï¼ˆåå‹ä¸–ç•Œå£¹è™Ÿï¼‰è¨­æ–½æ¦‚è¦½
        </h2>
        <p class="mt-2 text-gray-600">èˆ¹ä¸Šæ¶ˆè²»å¹£åˆ¥ï¼šå°å¹£ TWDã€‚</p>
      </div>

      <div class="bg-white p-6 rounded-xl card-shadow">
        <h3 class="text-xl font-bold text-gray-800 mb-4">é‡é»è³‡è¨Šï¼ˆtab / è¡¨æ ¼ / å€å¡Šï¼‰</h3>

        <!-- Pills -->
        <div class="flex space-x-2 overflow-x-auto no-scrollbar pb-2" id="ship-pill-bar">
          <button type="button" data-cat="dining" onclick="filterShipInfo('dining')" class="pill pill-active px-4 py-2 rounded-full text-sm whitespace-nowrap">ğŸ½ï¸ é¤å»³é£²é£Ÿ</button>
          <button type="button" data-cat="wifi" onclick="filterShipInfo('wifi')" class="pill pill-inactive px-4 py-2 rounded-full text-sm whitespace-nowrap">ğŸ“¶ WiFi ç¶²è·¯</button>
          <button type="button" data-cat="tips" onclick="filterShipInfo('tips')" class="pill pill-inactive px-4 py-2 rounded-full text-sm whitespace-nowrap">ğŸ’¡ é‡è¦æ³¨æ„äº‹é …</button>
          <button type="button" data-cat="ub" onclick="filterShipInfo('ub')" class="pill pill-inactive px-4 py-2 rounded-full text-sm whitespace-nowrap">ğŸ§© å‚™ç”¨æ¬„ä½</button>
        </div>

        <div id="ship-content-area" class="mt-4 space-y-4"></div>
      </div>
    </section>

    <!-- 4: CHARTER -->
    <section id="view-charter" class="hidden space-y-8">
      <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-[#d4a373]">
        <h2 class="text-2xl font-bold text-gray-800">ğŸš æ²–ç¹©é‚£éœ¸ï¼šèˆ’é©åŒ…è»Šä¸€æ—¥éŠ</h2>
        <p class="mt-2 text-gray-600">å› æœ‰é•·è¼©èˆ‡å¹¼ç«¥ï¼Œä¸”å²¸ä¸Šæ™‚é–“ç´„ 8~10 å°æ™‚ï¼Œå»ºè­°ä»¥ã€ŒåŒ…è»Šã€ç‚ºä¸»ï¼Œé¿å…é »ç¹è½‰ä¹˜æ¶ˆè€—é«”åŠ›ã€‚</p>
      </div>

      <div class="bg-white p-6 rounded-xl card-shadow">
        <h3 class="text-xl font-bold text-gray-800 mb-4">åŒ…è»Šï¼šè¡Œè…³æ²–ç¹©</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h4 class="font-bold text-gray-800 mb-2">åŒ…è»Šè³‡è¨Šï¼š6 äººåº§è»Šå‹</h4>
            <ul class="space-y-3 text-sm text-gray-700">
              <li class="flex items-start"><span class="text-green-500 mr-2">âœ“</span> <strong>è»Šå‹ï¼š</strong>Alphardï¼ˆæˆ–åŒç´šè»Šï¼‰</li>
              <li class="flex items-start"><span class="text-green-500 mr-2">âœ“</span> <strong>åŒ…è»Šæ™‚é–“ï¼š</strong>8 å°æ™‚ï¼ˆä¸­æ–‡å¸æ©Ÿï¼‰</li>
              <li class="flex items-start"><span class="text-green-500 mr-2">âœ“</span> <strong>è²»ç”¨ï¼š</strong>38,000 æ—¥åœ“/å¤©ï¼ˆç´„å°å¹£ 8,000ï¼‰</li>
              <li class="flex items-start"><span class="text-green-500 mr-2">âœ“</span> <strong>å…’ç«¥åº§æ¤…ï¼š</strong>5 æ­²ï¼ˆé ˆåŠ è³¼ï¼Œmail å‚™è¨»ï¼‰</li>
            </ul>
          </div>

          <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
            <h4 class="font-bold text-red-600 text-sm mb-2">âš ï¸ æ³¨æ„äº‹é …</h4>
            <ul class="list-disc pl-5 space-y-2 text-xs text-gray-700">
              <li>å¤©æ°£åŸå› éƒµè¼ªå‡ºç™¼ä½†ç„¡æ³•ç™»é™¸å²¸ä¸Šï¼Œå¯å…è²»å–æ¶ˆã€‚</li>
              <li>é™¤é£²ç”¨æ°´ä¹‹å¤–è»Šå…§ä¸èƒ½é£²é£Ÿï¼›è‹¥å¿…é ˆé£²é£Ÿè«‹å…ˆå¾µæ±‚å¸æ©ŸåŒæ„ã€‚</li>
              <li>å¸æ©Ÿè¨Šæ¯æœƒåœ¨å‡ºè¡Œå‰ä¸€å¤©ä»¥ LINE è¯ç¹«ã€‚</li>
              <li>è¶…æ™‚ 1 å°æ™‚ç‚º 3,000 æ—¥å¹£ã€‚</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 5: SPOTS -->
    <section id="view-spots" class="hidden space-y-8">
      <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-[#d4a373]">
        <h2 class="text-2xl font-bold text-gray-800">ğŸ“ è¡Œç¨‹æ™¯é»ï¼ˆä¾è¡Œç¨‹æ’åºï¼‰</h2>
        <p class="mt-2 text-gray-600">å…ˆæŠŠæ¡†æ¶å›ºå®šï¼ŒGoogle Map / é¤é£Ÿ / è»Šç¨‹æ™‚é–“å¯é€æ­¥è£œé½Šã€‚</p>
      </div>

      <div class="grid grid-cols-1 gap-4">
        <div class="bg-white p-6 rounded-xl card-shadow">
          <h3 class="text-lg font-bold text-gray-800">è¡Œç¨‹ 1ï¼šæ³¢ä¸Šå®®</h3>
          <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>Google Mapï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>é¤é£Ÿï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>è»Šç¨‹æ™‚é–“é ä¼°ï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
          </div>
        </div>

        <div class="bg-white p-6 rounded-xl card-shadow">
          <h3 class="text-lg font-bold text-gray-800">è¡Œç¨‹ 2ï¼šç‰æ³‰æ´</h3>
          <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>Google Mapï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>é¤é£Ÿï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
            <div class="bg-gray-50 p-3 rounded-lg border"><strong>è»Šç¨‹æ™‚é–“é ä¼°ï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
          </div>
        </div>

         <div class="bg-white p-6 rounded-xl card-shadow">
             <h3 class="text-lg font-bold text-gray-800">è¡Œç¨‹ 3ï¼šç€¨é•·å³¶</h3>
             <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>Google Mapï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>é¤é£Ÿï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>è»Šç¨‹æ™‚é–“é ä¼°ï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
             </div>
         </div>

         <div class="bg-white p-6 rounded-xl card-shadow">
             <h3 class="text-lg font-bold text-gray-800">è¡Œç¨‹ 4ï¼šåœ‹éš›é€šï¼ˆæ™‚é–“å…è¨±ï¼‰</h3>
             <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>Google Mapï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>é¤é£Ÿï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
                 <div class="bg-gray-50 p-3 rounded-lg border"><strong>è»Šç¨‹æ™‚é–“é ä¼°ï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span></div>
             </div>
         </div>

         <div class="bg-white p-6 rounded-xl card-shadow">
             <h3 class="text-lg font-bold text-gray-800">è¡Œç¨‹ 5ï¼šå›æ¸¯å£ï¼ˆæ™‚é–“ä¸å¤  / å›ç¨‹ç·©è¡ï¼‰</h3>
             <div class="mt-3 bg-yellow-50 p-3 rounded-lg border border-yellow-200 text-sm text-gray-700">
                 <strong>è»Šç¨‹æ™‚é–“é ä¼°ï¼š</strong><span class="text-gray-400">ï¼ˆè³‡æ–™å¾…è£œï¼‰</span>
                 <p class="mt-2 text-xs text-gray-600"><strong>æé†’ï¼š</strong>å»ºè­°ä¿ç•™å›æ¸¯å£ç·©è¡ï¼ˆå¡è»Šã€åœè»Šã€é›†åˆèµ°è·¯æ™‚é–“ï¼‰ã€‚</p>
             </div>
         </div>
      </div>
    </section>

  </main>

  <footer class="bg-white border-t border-[#e5e5e5]">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-gray-500">
      Â© 2026 Family Trip Guide
    </div>
  </footer>

  <script>
    // -----------------------------
    // Global state
    // -----------------------------
    const state = {
      activeTab: 'dashboard',
      shipCategory: 'dining',
      portStepIndex: 0
    };

    // -----------------------------
    // Checklist (localStorage)
    // -----------------------------
    const checklistItems = [
      "æ—¥å¹£ç¾é‡‘",
      "è­·ç…§æ­£æœ¬ (æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)",
      "è­·ç…§ A4 å½±æœ¬ x 2ä»½ (å ±åˆ°èˆ‡å…ç¨…ç”¨)",
      "èˆ¹ç¥¨ (é›»å­æª”æˆ–åˆ—å°)",
      "ä¿¡ç”¨å¡ (Visa/Masterï¼Œèˆ¹ä¸Šç¶å®šç”¨)",
      "å€‹äººå¸¸å‚™è—¥å“ (æšˆèˆ¹è—¥ã€æ„Ÿå†’è—¥ç­‰)",
      "æ—¥æœ¬ç¶²è·¯æ¼«éŠé–‹é€š",
      "èˆ’é©å¥½èµ°çš„é‹å­",
      "è–„å¤–å¥—"
    ];

    function renderChecklist() {
      const container = document.getElementById('checklist-container');
      if (!container) return;

      const STORAGE_KEY = 'okinawa_trip_checklist_v1';
      let saved = {};
      try { saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); } catch { saved = {}; }

      container.innerHTML = checklistItems.map((item, idx) => {
        const id = `ck-${idx}`;
        const checked = saved[id] ? 'checked' : '';
        return `
          <div class="flex items-center">
            <input id="${id}" type="checkbox" ${checked}
                   class="w-5 h-5 text-[#d4a373] rounded border-gray-300 focus:ring-[#d4a373]">
            <label for="${id}" class="ml-3 text-gray-700 cursor-pointer">${item}</label>
          </div>
        `;
      }).join('');

      checklistItems.forEach((_, idx) => {
        const id = `ck-${idx}`;
        const el = document.getElementById(id);
        if (!el) return;
        el.addEventListener('change', (e) => {
          saved[id] = e.target.checked;
          localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
        });
      });
    }

    // -----------------------------
    // Mobile menu
    // -----------------------------
    function toggleMobileMenu() {
      const menu = document.getElementById('mobile-menu');
      if (menu) menu.classList.toggle('hidden');
    }

    // -----------------------------
    // Top tabs
    // -----------------------------
    function switchTab(tabId) {
      state.activeTab = tabId;

      const ids = ['dashboard', 'port', 'ship', 'charter', 'spots'];
      ids.forEach(id => {
        const section = document.getElementById(`view-${id}`);
        const btn = document.getElementById(`nav-${id}`);
        if (!section || !btn) return;

        if (id === tabId) {
          section.classList.remove('hidden');
          btn.classList.remove('tab-inactive');
          btn.classList.add('tab-active');
        } else {
          section.classList.add('hidden');
          btn.classList.remove('tab-active');
          btn.classList.add('tab-inactive');
        }
      });

      // close mobile menu after switching
      const menu = document.getElementById('mobile-menu');
      if (menu && !menu.classList.contains('hidden')) menu.classList.add('hidden');

      // ensure renders for sections that need JS
      if (tabId === 'port') renderPortSteps();
      if (tabId === 'ship') {
        setShipPillActive(state.shipCategory);
        renderShipInfo(state.shipCategory);
      }
    }

    // -----------------------------
    // PORT (åœ–1)
    // -----------------------------
    const portSteps = [
      {
        title: "æŠµé”èˆ‡è¡Œæ",
        time: "11:00-12:30",
        summary: "æŠµé”ç¢¼é ­ã€æ‰˜é‹/æ•´ç†è¡Œæã€ç¢ºèªè­‰ä»¶èˆ‡è³‡æ–™ã€‚",
        details: [
          "å»ºè­° 10:30 å‰æŠµé”ï¼ˆé•·è¼©/å°å­©å¤šé ç•™ç·©è¡ï¼‰ã€‚",
          "å…ˆç¢ºèªï¼šè­·ç…§æ­£æœ¬ã€èˆ¹ç¥¨ã€è­·ç…§å½±æœ¬ç­‰æ˜¯å¦é½Šå…¨ã€‚",
          "è¡Œæï¼šåˆ†å‡ºã€Œéš¨èº«åŒ…ã€èˆ‡ã€Œæ‰˜é‹/äº¤å¯„ã€ç‰©å“ã€‚",
          "å¦‚é‡é›¨å¤©ï¼šå‚™å¦¥é›¨å…·ï¼Œå„ªå…ˆé¡§åŠé•·è¼©æ­¥è¡Œå®‰å…¨ã€‚"
        ]
      },
      {
        title: "å ±åˆ°é ˜æˆ¿å¡",
        time: "12:30-13:30",
        summary: "è¾¦ç†å ±åˆ°ã€ç¶å®šä¿¡ç”¨å¡/ä»˜æ¬¾æ–¹å¼ã€é ˜å–æˆ¿å¡ã€‚",
        details: [
          "æº–å‚™ï¼šè­·ç…§ã€èˆ¹ç¥¨/è¨‚ä½è³‡æ–™ã€ï¼ˆå¿…è¦æ™‚ï¼‰å½±æœ¬ã€‚",
          "èˆ¹ä¸Šæ¶ˆè²»é€šå¸¸æœƒç¶å®šä¿¡ç”¨å¡ï¼ˆVisa/Masterï¼‰ã€‚",
          "é ˜åˆ°æˆ¿å¡å¾Œï¼šç¢ºèªæˆ¿è™Ÿã€é›†åˆé ˆçŸ¥ç­‰ã€‚"
        ]
      },
      {
        title: "é€šé—œèˆ‡ç™»èˆ¹",
        time: "13:30-14:30",
        summary: "é€šé—œæª¢æŸ¥ã€å®‰æª¢å¾Œç™»èˆ¹ï¼Œç¢ºèªå‹•ç·šèˆ‡é›†åˆé»ã€‚",
        details: [
          "ä¾ç¾å ´æŒ‡ç¤ºæ’éšŠé€šé—œï¼›ç•™æ„å„ªå…ˆé€šé“ï¼ˆè‹¥æœ‰ï¼‰ã€‚",
          "ç™»èˆ¹å¾Œç†Ÿæ‚‰ï¼šé›»æ¢¯ã€é¤å»³ã€é†«å‹™å®¤ã€é›†åˆé»ã€‚",
          "è‹¥æœ‰ WiFi/ä»˜è²»æœå‹™éœ€æ±‚ï¼Œå…ˆç¢ºèªè³¼è²·æ–¹å¼ã€‚"
        ]
      },
      {
        title: "é›¢èˆ¹æµç¨‹",
        time: "Day 3",
        summary: "è¿”æŠµåŸºéš†å¾Œä¾æŒ‡ç¤ºä¸‹èˆ¹ã€é ˜å–è¡Œæã€éŠœæ¥äº¤é€šã€‚",
        details: [
          "ä¾èˆ¹æ–¹å…¬å‘Šçš„ä¸‹èˆ¹æ‰¹æ¬¡èˆ‡æŒ‡ç¤ºè¡Œå‹•ã€‚",
          "ç¢ºèªéš¨èº«ç‰©å“ï¼šæˆ¿å¡ã€æ‰‹æ©Ÿã€è­·ç…§ã€å……é›»å™¨ç­‰ã€‚",
          "ä¸‹èˆ¹å¾ŒæŒ‰æ—¢å®šè¨ˆç•«æ­ç«è»Šå›å—æ¸¯ã€‚"
        ]
      }
    ];

    function renderPortSteps() {
      const listEl = document.getElementById('port-step-list');
      const detailEl = document.getElementById('port-step-detail');
      if (!listEl || !detailEl) return;

      listEl.innerHTML = portSteps.map((s, idx) => {
        const isActive = idx === state.portStepIndex;
        return `
          <button type="button"
            class="step-item w-full text-left border rounded-xl p-4 flex gap-3 items-start ${isActive ? 'step-active' : 'step-inactive'}"
            onclick="selectPortStep(${idx})">
            <div class="step-index">${idx + 1}</div>
            <div class="flex-1">
              <div class="flex items-center justify-between gap-3">
                <div class="font-bold text-gray-800">${s.title}</div>
                <div class="text-xs text-gray-500">${s.time}</div>
              </div>
              <div class="mt-1 text-sm text-gray-600">${s.summary}</div>
            </div>
          </button>
        `;
      }).join('');

      const s = portSteps[state.portStepIndex];
      detailEl.innerHTML = `
        <div class="border-l-4 border-[#d4a373] bg-white rounded-xl p-1">
          <div class="p-4">
            <div class="flex items-start gap-3">
              <div class="text-2xl">ğŸ§¾</div>
              <div class="flex-1">
                <h3 class="text-xl font-bold text-gray-800">${s.title}</h3>
                <p class="text-sm text-gray-500 mt-1">${s.time}</p>
                <p class="text-sm text-gray-700 mt-3">${s.summary}</p>

                <div class="mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4">
                  <div class="font-bold text-gray-800 text-sm mb-2">å®Œæ•´å…§å®¹</div>
                  <ul class="list-disc pl-5 space-y-2 text-sm text-gray-700">
                    ${s.details.map(x => `<li>${x}</li>`).join('')}
                  </ul>
                </div>

                <p class="mt-4 text-xs text-gray-500">ï¼ˆä½ å¯åœ¨ <code>portSteps</code> è£¡è£œå……æ›´å¤šç´°ç¯€æˆ–æ”¹æ–‡å­—ã€‚ï¼‰</p>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function selectPortStep(idx) {
      state.portStepIndex = idx;
      renderPortSteps();
    }

    // -----------------------------
    // SHIP (åœ–2)
    // -----------------------------
    function setShipPillActive(category) {
      const bar = document.getElementById('ship-pill-bar');
      if (!bar) return;
      bar.querySelectorAll('button[data-cat]').forEach(btn => {
        const cat = btn.getAttribute('data-cat');
        if (cat === category) {
          btn.classList.remove('pill-inactive');
          btn.classList.add('pill-active');
        } else {
          btn.classList.remove('pill-active');
          btn.classList.add('pill-inactive');
        }
      });
    }

    function filterShipInfo(category) {
      state.shipCategory = category;
      setShipPillActive(category);
      renderShipInfo(category);
    }

    function renderShipInfo(category) {
      const container = document.getElementById('ship-content-area');
      if (!container) return;

      if (category === 'dining') {
        container.innerHTML = `
          <div class="bg-gray-50 border border-gray-200 rounded-xl p-5">
            <div class="flex items-center justify-between">
              <h4 class="font-bold text-gray-800 text-lg">é¤å»³é£²é£Ÿ</h4>
              <span class="text-xs font-bold px-2 py-1 rounded bg-yellow-100 text-yellow-800">è³‡è¨Š</span>
            </div>
            <p class="mt-2 text-sm text-gray-700">ï¼ˆè³‡æ–™æš«æ™‚ä¸è®Šï¼‰ä½ å¯ä»¥æŠŠã€Œé¤å»³æ¸…å–®/ç‡Ÿæ¥­æ™‚é–“/è²»ç”¨/æ˜¯å¦éœ€é ç´„ã€æ•´ç†æˆè¡¨æ ¼æˆ–å¡ç‰‡å¾Œè²¼åœ¨é€™è£¡ã€‚</p>
          </div>
        `;
        return;
      }

      if (category === 'tips') {
        container.innerHTML = `
          <div class="bg-gray-50 border border-gray-200 rounded-xl p-5">
            <div class="flex items-center justify-between">
              <h4 class="font-bold text-gray-800 text-lg">é‡è¦æ³¨æ„äº‹é …</h4>
              <span class="text-xs font-bold px-2 py-1 rounded bg-yellow-100 text-yellow-800">è³‡è¨Š</span>
            </div>
            <p class="mt-2 text-sm text-gray-700">ï¼ˆè³‡æ–™æš«æ™‚ä¸è®Šï¼‰å¯æ”¾ï¼šç™»èˆ¹æ³¨æ„ã€ç”¨é¤è¦ç¯„ã€ç”²æ¿å®‰å…¨ã€é•·è¼©æ´»å‹•å»ºè­°ã€é†«å‹™å®¤è³‡è¨Šç­‰ã€‚</p>
          </div>
        `;
        return;
      }

      if (category === 'ub') {
        container.innerHTML = `
          <div class="bg-gray-50 border border-gray-200 rounded-xl p-5">
            <div class="flex items-center justify-between">
              <h4 class="font-bold text-gray-800 text-lg">å‚™ç”¨æ¬„ä½</h4>
              <span class="text-xs font-bold px-2 py-1 rounded bg-yellow-100 text-yellow-800">è³‡è¨Š</span>
            </div>
            <p class="mt-2 text-sm text-gray-700">ï¼ˆç•™ç©ºï¼Œè³‡æ–™å¾…è£œï¼‰ä¾‹å¦‚ï¼šç·Šæ€¥è¯çµ¡è³‡è¨Šã€é›†åˆé»ã€æ¯æ—¥è¡Œç¨‹å…¬å‘Šæˆªåœ–ã€èˆ¹ä¸Šåœ°åœ–é€£çµç­‰ã€‚</p>
          </div>
        `;
        return;
      }

      if (category === 'wifi') {
        container.innerHTML = `
          <div class="bg-white rounded-xl border border-gray-200 p-5">
            <div class="flex items-center justify-between">
              <h4 class="font-bold text-gray-800 text-lg">WiFi æ–¹æ¡ˆåƒ¹æ ¼ï¼ˆæ–°å°å¹£ NTDï¼‰</h4>
              <span class="text-xs font-bold px-2 py-1 rounded bg-yellow-100 text-yellow-800">è³‡è¨Š</span>
            </div>
            <p class="mt-2 text-sm text-gray-600">è¡¨æ ¼æœƒéš¨ç•«é¢å¯¬åº¦å»¶å±•ï¼›åœ¨æ‰‹æ©Ÿä¸Šå¯å·¦å³æ»‘å‹•æŸ¥çœ‹ã€‚</p>

            <div class="mt-4 overflow-x-auto">
              <table class="w-full text-sm bg-white">
                <thead>
                  <tr class="bg-gray-50">
                    <th class="p-2 border text-center">æ–¹æ¡ˆ</th>
                    <th class="p-2 border text-center">ç¶²é€Ÿ</th>
                    <th class="p-2 border text-center">è¨­å‚™</th>
                    <th class="p-2 border text-center">å…©æ™š</th>
                    <th class="p-2 border text-center">ä¸‰æ™š</th>
                    <th class="p-2 border text-center">äº”æ™š</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="p-2 border text-center" rowspan="4">æ¨™æº–</td>
                    <td class="p-2 border text-center" rowspan="4">åŸºæœ¬</td>
                    <td class="p-2 border text-center">ä¸€å°</td>
                    <td class="p-2 border text-center">NTD 490</td>
                    <td class="p-2 border text-center">NTD 735</td>
                    <td class="p-2 border text-center">NTD 1,225</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">å…©å°</td>
                    <td class="p-2 border text-center">NTD 906</td>
                    <td class="p-2 border text-center">NTD 1,359</td>
                    <td class="p-2 border text-center">NTD 2,265</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">ä¸‰å°</td>
                    <td class="p-2 border text-center">NTD 1,238</td>
                    <td class="p-2 border text-center">NTD 1,857</td>
                    <td class="p-2 border text-center">NTD 3,095</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">å››å°</td>
                    <td class="p-2 border text-center">NTD 1,578</td>
                    <td class="p-2 border text-center">NTD 2,367</td>
                    <td class="p-2 border text-center">NTD 3,945</td>
                  </tr>

                  <tr>
                    <td class="p-2 border text-center" rowspan="4">å°Šè²´</td>
                    <td class="p-2 border text-center" rowspan="4">è‰¯å¥½</td>
                    <td class="p-2 border text-center">ä¸€å°</td>
                    <td class="p-2 border text-center">NTD 714</td>
                    <td class="p-2 border text-center">NTD 1,071</td>
                    <td class="p-2 border text-center">NTD 1,785</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">å…©å°</td>
                    <td class="p-2 border text-center">NTD 1,288</td>
                    <td class="p-2 border text-center">NTD 1,932</td>
                    <td class="p-2 border text-center">NTD 3,220</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">ä¸‰å°</td>
                    <td class="p-2 border text-center">NTD 1,810</td>
                    <td class="p-2 border text-center">NTD 2,715</td>
                    <td class="p-2 border text-center">NTD 4,525</td>
                  </tr>
                  <tr>
                    <td class="p-2 border text-center">å››å°</td>
                    <td class="p-2 border text-center">NTD 2,384</td>
                    <td class="p-2 border text-center">NTD 3,576</td>
                    <td class="p-2 border text-center">NTD 5,960</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <p class="mt-4 text-xs text-gray-500">
              æç¤ºï¼šä½ å¦‚æœæœ€å¾Œç¢ºå®šä½å¹¾æ™šï¼Œæˆ‘å¯ä»¥å†å¹«ä½ åŠ ã€Œè‡ªå‹•é«˜äº®æ¬„ä½ã€æˆ–ã€Œåˆè¨ˆä¼°ç®—ã€ã€‚
            </p>
          </div>
        `;
        return;
      }

      container.innerHTML = '';
    }

    // -----------------------------
    // Init
    // -----------------------------
    document.addEventListener('DOMContentLoaded', () => {
      renderChecklist();
      renderPortSteps();
      setShipPillActive(state.shipCategory);
      renderShipInfo(state.shipCategory);
    });
  </script>
</body>
</html>

